# puzzle-time writeup

When you visit the challenge, you see a chess board with a puzzle on it. The UI and the flavortext hint that there are 10 puzzles to be solved. You could solve all puzzles, and this would actually give you the flag. However, as you may have found out, you can only make 7 mistakes during one session, otherwise you have to start over. So it may be faster to see if there's another way to get the flag...

If you inspect the main script, it looks like puzzles are fetched from the server, and the server gives away all the moves, which are stored in the global variable `state.moves`. So you could just print out `state.moves` in your browser console to see the solution of the current puzzle. That certainly takes away the challenge of the puzzles.

Reading the script further, it also looks like your solution is completely validated in the browser, rather than on the server. When you've successfully solved a puzzle, the `solvedPuzzle` function gets called, which informs the server that you solved a certain level. Because the number of the level is the only information passed to the server, it is clear that there are zero further checks on the server that you actually found the right moves. The server returns another puzzle, or a message.

Since the server doesn't care to check if you found the right moves, you can just claim to have solved the 10th puzzle and the server will probably give you the flag. The `solvedPuzzle` function can be called in the browser console, and it makes use of the current level number stored in `state.level`. So obtaining the flag just takes two lines in the browser console:

```
state.level = 10;
solvedPuzzle();
```

And the flag appears!

You could have reached the same conclusion by looking at your browser's developer tools' Network tab, instead of the script. At the beginning, the first puzzle is fetched by requesting `puzzle.php`, and the response contains all moves. Solving the first puzzle will lead to another request to `puzzle.php`, but with `solved=1` as request body. So you could do the same request but with `solved=10`, and you'd also get the flag. An example command to make such a request, using `curl`:

```
curl -d "solved=10" -X POST http://127.0.66.1/puzzle.php
```
